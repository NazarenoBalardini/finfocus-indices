name: ðŸ’§ Actualizar pasiva.json

permissions:
contents: write

on:
workflow_dispatch: {}
schedule:
- cron: '0 9 * * *'

jobs:
update:
runs-on: ubuntu-latest
steps:
  - uses: actions/checkout@v3

  - name: Setup Python
    uses: actions/setup-python@v4
    with:
      python-version: '3.x'

  - name: Instalar requests
    run: pip install requests

  - name: Ejecutar update_pasiva.py
    env:
      BCRA_API_KEY: ${{ secrets.BCRA_API_KEY }}
    run: python update_pasiva.py

  - name: Commit & Push pasiva.json si cambiÃ³
    run: |
      git config user.name "github-actions[bot]"
      git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
      git add indices/pasiva.json
      if ! git diff --cached --quiet; then
        git commit -m "ðŸ”„ Actualiza pasiva.json"
        git push
      fi
